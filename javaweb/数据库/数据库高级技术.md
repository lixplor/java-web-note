# 数据库高级技术

## 表设计

### 建表原则

* 一对一
    - 2种方式:
        - 唯一外键对应: 将任意一个一方假设为多方, 增加一个外键字段, 设置为UNIQUE, 关联另一方的主键
            - UNIQUE约束用来限制该列id值唯一, 这样才能实现一对一唯一对应关系
        - 主键对应: 将两个一方的主键建立映射关系, 即两个一方的主键字段的值是相互一致的, 这样也能实现一对一唯一对应关系
* 一对多
    - 在多方增加一个字段作为外键指向一方的主键
* 多对多
    - 创建一个中间关系表, 其中2个字段作为外键分别指向两个多方各自的主键

```
# 一对一: 唯一外键对应

  表A              表B 
+-----+       +-----+-----+
| id  |       | aid |  id |
+-----+       +-----+-----+
|  1  |-------|  1  |  1  |
+-----+       +-----+-----+
|  2  |-------|  2  |  2  |
+-----+       +-----+-----+
|  3  |-------|  3  |  3  |
+-----+       +-----+-----+



# 一对一: 主键对应

  表A            表B 
+-----+       +-----+
| id  |       |  id |
+-----+       +-----+
|  1  |       |  1  |
+-----+       +-----+
|  2  |       |  2  |
+-----+       +-----+
|  3  |       |  3  |
+-----+       +-----+



# 一对多

  表A              表B 
+-----+       +-----+-----+
| id  |       | aid |  id |
+-----+       +-----+-----+
|  1  |---+---|  1  |  1  |
+-----+   |   +-----+-----+
|  2  |   +---|  1  |  2  |
+-----+       +-----+-----+
|  3  |-------|  3  |  3  |
+-----+       +-----+-----+



# 多对多

  表A            中间表             表B 
+-----+       +-----+-----+       +-----+
| id  |       | aid | bid |       | id  |
+-----+       +-----+-----+       +-----+
|  1  |---+---|  1  |  1  |-------|  1  |
+-----+   |   +-----+-----+       +-----+
|  2  |   +---|  1  |  2  |---+---|  2  |
+-----+       +-----+-----+   |   +-----+
|  3  |-------|  3  |  2  |---+   |  3  |
+-----+       +-----+-----+       +-----+

```

### 数据库设计范式

* 第一范式(1NF)

* 第二范式(2NF)

* 第三范式(3NF)

* 巴斯-科德范式(BCNF)

* 第四范式(4NF)

* 第五范式(5NF/完美范式)



## MySQL管理

### 存储引擎

### 用户和权限

### 内置数据卷表分析

### 数据备份和恢复

### 高可用性(HA)


## 高级技术

### 主从复制

### 组复制(MGR)

### 读写分离

### 分库分表

### 负载均衡

### 性能优化

### 安全和监控


